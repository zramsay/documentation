<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Second-price auction | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.2cfbd739.js" as="script"><link rel="preload" href="/documentation/assets/js/2.bc03ef4c.js" as="script"><link rel="preload" href="/documentation/assets/js/51.2847258f.js" as="script"><link rel="preload" href="/documentation/assets/js/9.a540c8f2.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.645605e8.js"><link rel="prefetch" href="/documentation/assets/js/11.c92f48af.js"><link rel="prefetch" href="/documentation/assets/js/12.9a433e8a.js"><link rel="prefetch" href="/documentation/assets/js/13.bdb6655c.js"><link rel="prefetch" href="/documentation/assets/js/14.2222a254.js"><link rel="prefetch" href="/documentation/assets/js/15.4ae196a5.js"><link rel="prefetch" href="/documentation/assets/js/16.cb72aa98.js"><link rel="prefetch" href="/documentation/assets/js/17.d34e30a2.js"><link rel="prefetch" href="/documentation/assets/js/18.9d2884f3.js"><link rel="prefetch" href="/documentation/assets/js/19.6fd6b144.js"><link rel="prefetch" href="/documentation/assets/js/20.4101a66f.js"><link rel="prefetch" href="/documentation/assets/js/21.752c8434.js"><link rel="prefetch" href="/documentation/assets/js/22.ec5713d7.js"><link rel="prefetch" href="/documentation/assets/js/23.e89ddb08.js"><link rel="prefetch" href="/documentation/assets/js/24.9f323637.js"><link rel="prefetch" href="/documentation/assets/js/25.6fcbfae5.js"><link rel="prefetch" href="/documentation/assets/js/26.a480c54e.js"><link rel="prefetch" href="/documentation/assets/js/27.613d9de2.js"><link rel="prefetch" href="/documentation/assets/js/28.3baccd4d.js"><link rel="prefetch" href="/documentation/assets/js/29.76bd5709.js"><link rel="prefetch" href="/documentation/assets/js/3.9963b0cf.js"><link rel="prefetch" href="/documentation/assets/js/30.52236414.js"><link rel="prefetch" href="/documentation/assets/js/31.2bf03e3e.js"><link rel="prefetch" href="/documentation/assets/js/32.31d05526.js"><link rel="prefetch" href="/documentation/assets/js/33.7e537147.js"><link rel="prefetch" href="/documentation/assets/js/34.c16af583.js"><link rel="prefetch" href="/documentation/assets/js/35.d372f7ec.js"><link rel="prefetch" href="/documentation/assets/js/36.5622aca2.js"><link rel="prefetch" href="/documentation/assets/js/37.70cdf0c9.js"><link rel="prefetch" href="/documentation/assets/js/38.f1f78c51.js"><link rel="prefetch" href="/documentation/assets/js/39.fd5313f4.js"><link rel="prefetch" href="/documentation/assets/js/4.444bab69.js"><link rel="prefetch" href="/documentation/assets/js/40.48e1430e.js"><link rel="prefetch" href="/documentation/assets/js/41.e3b2f87c.js"><link rel="prefetch" href="/documentation/assets/js/42.a9f583a3.js"><link rel="prefetch" href="/documentation/assets/js/43.a7367ae3.js"><link rel="prefetch" href="/documentation/assets/js/44.19051cd9.js"><link rel="prefetch" href="/documentation/assets/js/45.0130f2bc.js"><link rel="prefetch" href="/documentation/assets/js/46.6b00508e.js"><link rel="prefetch" href="/documentation/assets/js/47.1dbfd966.js"><link rel="prefetch" href="/documentation/assets/js/48.981d0501.js"><link rel="prefetch" href="/documentation/assets/js/49.d38ee0f9.js"><link rel="prefetch" href="/documentation/assets/js/5.c91fbe47.js"><link rel="prefetch" href="/documentation/assets/js/50.ca0729f4.js"><link rel="prefetch" href="/documentation/assets/js/52.2f2d1615.js"><link rel="prefetch" href="/documentation/assets/js/53.a9c0c233.js"><link rel="prefetch" href="/documentation/assets/js/54.5c863aac.js"><link rel="prefetch" href="/documentation/assets/js/55.ec33d112.js"><link rel="prefetch" href="/documentation/assets/js/56.d60cbfa0.js"><link rel="prefetch" href="/documentation/assets/js/6.e6747751.js"><link rel="prefetch" href="/documentation/assets/js/7.c4018845.js"><link rel="prefetch" href="/documentation/assets/js/8.10130a2a.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric/" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project/" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle/" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link router-link-active">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric/" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project/" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle/" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link router-link-active">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/" class="sidebar-heading clickable router-link-active"><span>Zoe</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/" class="sidebar-link">Zoe: Offer-Safety Enforcement</a></li><li><a href="/documentation/zoe/guide/offer-safety.html" class="sidebar-link">Offer Safety</a></li><li><a href="/documentation/zoe/guide/proposal.html" class="sidebar-link">The Structure of Proposals</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/contracts/" class="sidebar-heading clickable router-link-active open"><span>Zoe Contracts</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/contracts/atomic-swap.html" class="sidebar-link">Atomic Swap</a></li><li><a href="/documentation/zoe/guide/contracts/autoswap.html" class="sidebar-link">AutoSwap</a></li><li><a href="/documentation/zoe/guide/contracts/covered-call.html" class="sidebar-link">Covered Call</a></li><li><a href="/documentation/zoe/guide/contracts/second-price-auction.html" class="active sidebar-link">Second-price auction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/zoe/guide/contracts/second-price-auction.html#public-second-price-auction" class="sidebar-link">Public second-price auction</a></li></ul></li><li><a href="/documentation/zoe/guide/contracts/simple-exchange.html" class="sidebar-link">Simple Exchange</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/api/" class="sidebar-heading clickable"><span>Zoe API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/api/zoe.html" class="sidebar-link">Zoe</a></li><li><a href="/documentation/zoe/api/records.html" class="sidebar-link">Records</a></li><li><a href="/documentation/zoe/api/zoe-contract-facet.html" class="sidebar-link">Zoe Contract Facet</a></li><li><a href="/documentation/zoe/api/zoe-helpers.html" class="sidebar-link">ZoeHelpers</a></li></ul></section></li><li><a href="/documentation/zoe/roadmap/" class="sidebar-link">Zoe Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="second-price-auction"><a href="#second-price-auction" class="header-anchor">#</a> Second-price auction</h1> <div class="zoe-version">
    Zoe v0.3.0. Last updated
    3/24/2020.
</div> <p>In a second-price auction, the winner is the participant with the
highest bid, but the winner only pays the price corresponding to the
second highest bid. Second-price auctions must have sealed (i.e.
private) bids to have the right economic incentives, so this version,
which is entirely public, should not be used in production for real
items.</p> <h2 id="public-second-price-auction"><a href="#public-second-price-auction" class="header-anchor">#</a> Public second-price auction</h2> <p>In this particular &quot;public&quot; second-price auction, anyone who has
access to the auction instance can make a bid by making a proposal.</p> <p>Alice can create an auction from an existing second-price auction
installation. (<code>installationHandle</code> is the unique, unforgeable
identifier for the installation.)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> numBidsAllowed <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> issuerKeywordRecord <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> moolaIssuer<span class="token punctuation">,</span>
  Bid<span class="token operator">:</span> simoleanIssuer<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> terms <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> numBidsAllowed <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> aliceInvite <span class="token operator">=</span> <span class="token keyword">await</span> zoe<span class="token punctuation">.</span><span class="token function">makeInstance</span><span class="token punctuation">(</span>
  installationHandle<span class="token punctuation">,</span>
  issuerKeywordRecord<span class="token punctuation">,</span>
  terms<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>She can put up something at auction by first escrowing it with Zoe. In
order to escrow something with Zoe, she needs to provide a payment for
what she wants to put up at auction, and she needs to make a
<code>proposal</code>. The <code>proposal</code> will be enforced by Zoe and will protect
Alice from misbehavior by the smart contract and other participants.
<code>want</code> and <code>give</code> are used to enforce offer safety, and <code>exit</code> is used
to enforce payout liveness. If no <code>exit</code> rule is given, as in this
example, the default (<code>{ onDemand: null }</code>) is used.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> aliceProposal <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Bid<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> alicePayments <span class="token operator">=</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> aliceMoolaPayment <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> seat<span class="token operator">:</span> aliceSeat<span class="token punctuation">,</span> payout<span class="token operator">:</span> alicePayoutP <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> zoe<span class="token punctuation">.</span><span class="token function">redeem</span><span class="token punctuation">(</span>
  aliceInvite<span class="token punctuation">,</span>
  aliceProposal<span class="token punctuation">,</span>
  alicePayments<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Once Alice has redeemed her invite, she can initialize the auction:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> aliceOfferResult <span class="token operator">=</span> <span class="token keyword">await</span> aliceSeat<span class="token punctuation">.</span><span class="token function">sellAssets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now Alice can spread her invite far and wide and see if
there are any bidders. Let's say that Bob gets the invite and
wants to see if it is the kind of contract that he wants to join. He
can check that the installationHandle installed is the swap he is expecting. He can also check that the item up for sale is the kind that he wants by comparing the issuers.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Bob collects information about the swap</span>
<span class="token keyword">const</span> inviteIssuer <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getInviteIssuer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bobExclusiveInvite <span class="token operator">=</span> <span class="token keyword">await</span> inviteIssuer<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span>bobInvite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bobInviteExtent <span class="token operator">=</span> inviteIssuer<span class="token punctuation">.</span><span class="token function">getAmountOf</span><span class="token punctuation">(</span>bobExclusiveInvite<span class="token punctuation">)</span>
  <span class="token punctuation">.</span>extent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>
  installationHandle<span class="token operator">:</span> bobInstallationId<span class="token punctuation">,</span>
  issuerKeywordRecord<span class="token operator">:</span> bobIssuers<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>bobInviteExtent<span class="token punctuation">.</span>instanceHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Bob checks the information is what he expects</span>
<span class="token function">assert</span><span class="token punctuation">(</span>bobInstallationId <span class="token operator">===</span> installationHandle<span class="token punctuation">,</span> details<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">wrong installation</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assert</span><span class="token punctuation">(</span>bobIssuers<span class="token punctuation">.</span>Asset <span class="token operator">===</span> moolaIssuer<span class="token punctuation">,</span> details<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">wrong issuer</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Bob decides to join the contract and
makes an offer:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> bobProposal <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Bid<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bobPayments <span class="token operator">=</span> <span class="token punctuation">{</span> Bid<span class="token operator">:</span> bobSimoleanPayment <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Bob escrows with zoe</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> seat<span class="token operator">:</span> bobSeat<span class="token punctuation">,</span> payout<span class="token operator">:</span> bobPayoutP <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> zoe<span class="token punctuation">.</span><span class="token function">redeem</span><span class="token punctuation">(</span>
  bobExclusiveInvite<span class="token punctuation">,</span>
  bobProposal<span class="token punctuation">,</span>
  bobPayments<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Bob bids</span>
<span class="token keyword">const</span> bobOfferResult <span class="token operator">=</span> <span class="token keyword">await</span> bobSeat<span class="token punctuation">.</span><span class="token function">bid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Since multiple parties may want to participate in the auction, let's say that Carol and Dave also decide to bid in the same way
as Bob- Carol bidding 7 simoleans, and Dave bidding 5 simoleans.</p> <p>Bob wins since he bid 11 simoleans, but pays the second-highest price, which is Carol's bid of 7
simoleans. Thus, when Alice claims her winnings, she gets 7 simoleans.
Bob gets the 1 moola that was up for auction as well as a refund of 4
simoleans (11-7), and Carol and Dave get a full refund.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/zoe/guide/contracts/covered-call.html" class="prev">Covered Call</a></span> <span class="next"><a href="/documentation/zoe/guide/contracts/simple-exchange.html">Simple Exchange</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.2cfbd739.js" defer></script><script src="/documentation/assets/js/2.bc03ef4c.js" defer></script><script src="/documentation/assets/js/51.2847258f.js" defer></script><script src="/documentation/assets/js/9.a540c8f2.js" defer></script>
  </body>
</html>
